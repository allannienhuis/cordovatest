/* eslint-disable */

const heapKey = '2325240296'
const userJSON = '{"isAvailable":false,"maxAcceptedTasks":6,"id":"83be3aea-7d4a-48c9-ad12-b53a3b6a2f65","userName":"anienhuis@soundthinking.com","email":"anienhuis@soundthinking.com","firstName":"Allan","lastName":"Nienhuis","agencyId":0,"title":"titan","rankId":1,"rankZoneId":1,"isActive":true,"badgeNumber":null,"phoneNumber":null,"mobileNumber":null,"roles":["Siren_Admin","Siren_User","Omega_User","Flex_Reviewer","Flex_IrpUser","Shotspotter_Dispatch","Shotspotter_Respond","Shotspotter_Rtcc","Shotspotter_Forensic","Shotspotter_Viewer","Dashboard_User","ServiceAdmin_User","Simulator_User","Simulator_Admin","Review_User","Review_Reviewer","Investigate_Review","Insight_Superuser","Insight_ConnectSupervisor","Insight_ConnectAnalyst","Siren_Engineering","Connect_Patrol","ReviewTraining_Trainee","ReviewTraining_User","Insight_Shotspotter","User","Connect_User","Shotspotter_User","Investigate_User","$sst"],"zoneIds":[],"groupIds":[71,93,95],"localeId":null,"createdAt":"2017-08-02T17:33:14.000Z","createdBy":"","updatedAt":"2023-05-18T14:30:36.375Z","updatedBy":"user/83b916ea-a1fe-48ac-b066-1b821bb3b7e3","agency":{"id":0,"salesforceId":null,"customerTypeId":1,"enabledApps":[{"appName":"admin-portal","rolesEnabled":["Siren_Admin","Siren_Superuser","Siren_AllAgenciesView","Siren_CustomerSupport","Siren_IrcSupport","Siren_Tse","Siren_Training","Siren_Engineering"]},{"appName":"shotspotter","rolesEnabled":["Shotspotter_Dispatch","Shotspotter_Respond","Shotspotter_Rtcc","Shotspotter_Forensic","Shotspotter_Viewer"]},{"appName":"dashboard","rolesEnabled":["Dashboard_Admin","Dashboard_Manager","Dashboard_User","Dashboard_Support","Dashboard_Developer","Dashboard_CustomerSuccess"]},{"appName":"service-admin","rolesEnabled":["ServiceAdmin_User"]},{"appName":"simulator","rolesEnabled":["Simulator_User","Simulator_Admin"]},{"appName":"review","rolesEnabled":["Review_User","Review_Reviewer","Review_Supervisor","Review_Admin"]},{"appName":"insight","rolesEnabled":["Investigate_User","Investigate_Review","Insight_Superuser","Insight_ConnectSupervisor","Insight_ConnectAnalyst","Insight_ReportAnalyst","Insight_Shotspotter"]},{"appName":"status","rolesEnabled":["Status_Admin","Status_Agent","Status_Reviewer","Status_Public","Status_Customer","Status_Installer","Status_Operator"]},{"appName":"locserver","rolesEnabled":["Locserver_SettingsWrite","Locserver_SettingsRead","Locserver_AudioDownload"]},{"appName":"geoadmin","rolesEnabled":["Geoadmin_User","Geoadmin_Admin"]},{"appName":"connect","rolesEnabled":["Connect_Admin","Connect_Patrol"]},{"appName":"review-training","rolesEnabled":["ReviewTraining_Admin","ReviewTraining_Trainee","ReviewTraining_User"]}],"statusId":2,"typeId":1,"orgId":1,"name":"sstmetro","isActive":true,"formalName":"Shotspotter Staging","subdomain":"sstmetro","rankZoneId":1,"timezone":"America/Los_Angeles","localeId":"en","settings":[{"id":"7","key":"insight__ShowDataTransparency","type":"bool","value":true,"createdAt":"2021-09-22T16:39:53Z","createdBy":"56ff8cf3-7fd3-4782-afd1-83e0b44d5938","updatedAt":"2021-10-05T15:58:18Z","updatedBy":"9a324ec4-0c0d-4310-9a5c-92a96c2618fc"},{"id":"6","key":"insight__ShowGroundTruth","type":"bool","value":true,"createdAt":"2021-09-20T09:45:25Z","createdBy":"56ff8cf3-7fd3-4782-afd1-83e0b44d5938","updatedAt":"2023-05-12T19:51:17Z","updatedBy":"9a324ec4-0c0d-4310-9a5c-92a96c2618fc"},{"id":"9","key":"insight__allowInsightV2","type":"bool","value":true,"createdAt":"2022-02-14T08:51:17Z","createdBy":"56ff8cf3-7fd3-4782-afd1-83e0b44d5938","updatedAt":"2022-06-24T13:32:25Z","updatedBy":"9a324ec4-0c0d-4310-9a5c-92a96c2618fc"},{"id":"16","key":"insight__OptInIntoV2","type":"bool","value":true,"createdAt":"2022-06-01T14:29:41Z","createdBy":"56ff8cf3-7fd3-4782-afd1-83e0b44d5938","updatedAt":"2022-06-03T17:02:40Z","updatedBy":"56ff8cf3-7fd3-4782-afd1-83e0b44d5938"},{"id":"10","key":"agencyHasRmsData","type":"bool","value":false,"createdAt":"2022-02-14T08:51:17Z","createdBy":"56ff8cf3-7fd3-4782-afd1-83e0b44d5938","updatedAt":"2022-02-17T17:55:56Z","updatedBy":"9a324ec4-0c0d-4310-9a5c-92a96c2618fc"},{"id":"4","key":"connect__allowV2Patrol","type":"bool","value":false,"createdAt":"2021-05-05T11:38:22Z","createdBy":"56ff8cf3-7fd3-4782-afd1-83e0b44d5938","updatedAt":"2021-05-05T11:38:22Z","updatedBy":"56ff8cf3-7fd3-4782-afd1-83e0b44d5938"},{"id":"5","key":"connect__locationSource","type":"string","value":"geolocation-api","createdAt":"2021-05-05T11:01:20Z","createdBy":"56ff8cf3-7fd3-4782-afd1-83e0b44d5938","updatedAt":"2021-05-11T00:46:57Z","updatedBy":"83b916ea-a1fe-48ac-b066-1b821bb3b7e3"},{"id":"11","key":"connect__rolesForAhCreation","type":"string","value":"[\\"Insight_ConnectAnalyst\\"]","createdAt":"2022-02-17T12:42:39Z","createdBy":"56ff8cf3-7fd3-4782-afd1-83e0b44d5938","updatedAt":"2022-03-01T20:31:38Z","updatedBy":"56ff8cf3-7fd3-4782-afd1-83e0b44d5938"},{"id":"12","key":"connect__rolesForDpSuppression","type":"string","value":"[\\"Insight_ConnectAnalyst\\"]","createdAt":"2022-02-17T12:42:39Z","createdBy":"56ff8cf3-7fd3-4782-afd1-83e0b44d5938","updatedAt":"2022-03-01T20:31:38Z","updatedBy":"56ff8cf3-7fd3-4782-afd1-83e0b44d5938"},{"id":"13","key":"connect__weekDefinition","type":"string","value":"","createdAt":"2022-02-27T17:27:30Z","createdBy":"56ff8cf3-7fd3-4782-afd1-83e0b44d5938","updatedAt":"2022-02-27T17:27:30Z","updatedBy":"56ff8cf3-7fd3-4782-afd1-83e0b44d5938"},{"id":"14","key":"connect__goLiveDate","type":"string","value":"","createdAt":"2022-02-27T17:27:30Z","createdBy":"56ff8cf3-7fd3-4782-afd1-83e0b44d5938","updatedAt":"2022-02-27T17:27:30Z","updatedBy":"56ff8cf3-7fd3-4782-afd1-83e0b44d5938"},{"id":"15","key":"connect__goEffectiveStartDate","type":"string","value":"","createdAt":"2022-02-27T17:27:30Z","createdBy":"56ff8cf3-7fd3-4782-afd1-83e0b44d5938","updatedAt":"2022-02-27T17:27:30Z","updatedBy":"56ff8cf3-7fd3-4782-afd1-83e0b44d5938"},{"id":"22","key":"connect__patrolOutsideBoxTimeout","type":"int","value":600,"createdAt":"2023-01-06T09:36:26Z","createdBy":"56ff8cf3-7fd3-4782-afd1-83e0b44d5938","updatedAt":"2023-01-06T09:36:26Z","updatedBy":"56ff8cf3-7fd3-4782-afd1-83e0b44d5938"},{"id":"23","key":"connect__patrolRestrictionTimeout","type":"int","value":3600,"createdAt":"2023-01-06T09:36:26Z","createdBy":"56ff8cf3-7fd3-4782-afd1-83e0b44d5938","updatedAt":"2023-01-06T09:36:26Z","updatedBy":"56ff8cf3-7fd3-4782-afd1-83e0b44d5938"},{"id":"25","key":"resourcerouter__useKoper","type":"bool","value":true,"createdAt":"2023-05-16T12:10:30Z","createdBy":"","updatedAt":"2023-05-16T12:10:30Z","updatedBy":""},{"id":"26","key":"resourcerouter__patrolLabel","type":"string","value":"Patrol","createdAt":"2023-05-16T12:10:30Z","createdBy":"","updatedAt":"2023-05-16T12:10:30Z","updatedBy":""},{"id":"2","key":"appShowLatLongOnIncident","type":"bool","value":false,"createdAt":"2019-11-01T13:45:55Z","createdBy":"","updatedAt":"2021-05-06T21:31:26Z","updatedBy":"5415e7c3-39c8-4c69-8c71-9b273361babd"},{"id":"24","key":"respond__groundTruthCollection","type":"bool","value":true,"createdAt":"2023-01-06T09:36:26Z","createdBy":"56ff8cf3-7fd3-4782-afd1-83e0b44d5938","updatedAt":"2023-05-23T18:26:22.357Z","updatedBy":"user-service","roleKey":"Shotspotter_GtEarlyAccess"},{"id":"1","key":"respondUserManagedSubscriptions","type":"bool","value":true,"createdAt":"2019-10-15T13:31:03Z","createdBy":"56ff8cf3-7fd3-4782-afd1-83e0b44d5938","updatedAt":"2019-10-25T21:05:23Z","updatedBy":""},{"id":"3","key":"appsShowDataTransparency","type":"bool","value":true,"createdAt":"2020-10-01T07:43:57Z","createdBy":"56ff8cf3-7fd3-4782-afd1-83e0b44d5938","updatedAt":"2022-07-21T07:28:56Z","updatedBy":"9a324ec4-0c0d-4310-9a5c-92a96c2618fc"},{"id":"8","key":"respond__ResponseWindow","type":"int","value":10,"createdAt":"2021-09-27T13:21:45Z","createdBy":"56ff8cf3-7fd3-4782-afd1-83e0b44d5938","updatedAt":"2021-10-01T11:15:54Z","updatedBy":"9a324ec4-0c0d-4310-9a5c-92a96c2618fc"},{"id":"17","key":"respond__responseCopToTheDot","type":"bool","value":true,"createdAt":"2022-06-29T11:58:26Z","createdBy":"56ff8cf3-7fd3-4782-afd1-83e0b44d5938","updatedAt":"2022-09-20T21:59:35Z","updatedBy":"83be3aea-7d4a-48c9-ad12-b53a3b6a2f65"},{"id":"18","key":"respond__responseEntryTimeLimit","type":"int","value":15,"createdAt":"2022-06-29T11:58:26Z","createdBy":"56ff8cf3-7fd3-4782-afd1-83e0b44d5938","updatedAt":"2022-06-29T11:58:26Z","updatedBy":"56ff8cf3-7fd3-4782-afd1-83e0b44d5938"},{"id":"19","key":"respond__responseExitTimeLimit","type":"int","value":120,"createdAt":"2022-06-29T11:58:26Z","createdBy":"56ff8cf3-7fd3-4782-afd1-83e0b44d5938","updatedAt":"2022-06-29T11:58:26Z","updatedBy":"56ff8cf3-7fd3-4782-afd1-83e0b44d5938"},{"id":"20","key":"respond__responseRadius","type":"int","value":25,"createdAt":"2022-06-29T11:58:26Z","createdBy":"56ff8cf3-7fd3-4782-afd1-83e0b44d5938","updatedAt":"2022-06-29T11:58:26Z","updatedBy":"56ff8cf3-7fd3-4782-afd1-83e0b44d5938"},{"id":"21","key":"respond__responseTrackLimitPerIn","type":"int","value":2,"createdAt":"2022-06-29T14:20:26Z","createdBy":"56ff8cf3-7fd3-4782-afd1-83e0b44d5938","updatedAt":"2022-06-29T14:20:26Z","updatedBy":"56ff8cf3-7fd3-4782-afd1-83e0b44d5938"}],"zones":[],"city":"Atlanta","state":"Georgia","country":"United States","sharedData":[],"createdAt":"2018-05-21T19:46:43.757Z","createdBy":"","updatedAt":"2023-05-16T19:10:31.389Z","updatedBy":"","customerType":{"id":1,"name":"Public Safety/PD","createdAt":"2021-07-12T19:16:49.891Z","createdBy":"MIC609AgencyStatusCustomerType1625781361365","updatedAt":"2021-07-12T19:16:49.891Z","updatedBy":"MIC609AgencyStatusCustomerType1625781361365"},"status":{"id":2,"name":"Active","createdAt":"2021-07-12T19:16:49.891Z","createdBy":"MIC609AgencyStatusCustomerType1625781361365","updatedAt":"2021-07-12T19:16:49.891Z","updatedBy":"MIC609AgencyStatusCustomerType1625781361365"},"type":{"id":1,"name":"Normal","createdAt":"2021-07-12T19:16:49.891Z","createdBy":"MIC609AgencyType1626114518043","updatedAt":"2021-07-12T19:16:49.891Z","updatedBy":"MIC609AgencyType1626114518043"},"rankZone":{"id":1,"name":"U.S. Ranks","createdAt":"2019-05-06T19:31:05.334Z","createdBy":"RanksSeed1556234038400","updatedAt":"2019-05-06T19:31:05.334Z","updatedBy":"RanksSeed1556234038400"}},"rankName":"Chief of Police","rolesDetails":[{"id":"Siren_Admin","displayName":"Admin SSTAdmin"},{"id":"Shotspotter_Dispatch","displayName":"ShotSpotter Dispatch"},{"id":"Shotspotter_Respond","displayName":"ShotSpotter Respond"},{"id":"Shotspotter_Rtcc","displayName":"ShotSpotter RTCC"},{"id":"Shotspotter_Forensic","displayName":"ShotSpotter Forensic"},{"id":"Shotspotter_Viewer","displayName":"ShotSpotter Viewer"},{"id":"Dashboard_User","displayName":"Dashboard User"},{"id":"ServiceAdmin_User","displayName":"Service Admin User"},{"id":"Simulator_User","displayName":"Simulator User"},{"id":"Simulator_Admin","displayName":"Simulator Admin"},{"id":"Review_User","displayName":"Review User"},{"id":"Review_Reviewer","displayName":"Review Reviewer"},{"id":"Investigate_Review","displayName":"InSight Review"},{"id":"Connect_Patrol","displayName":"ResourceRouter Patrol"},{"id":"ReviewTraining_User","displayName":"Review Training User"},{"id":"Insight_Shotspotter","displayName":"InSight ShotSpotter"},{"id":"User","displayName":"User"},{"id":"Connect_User","displayName":"ResourceRouter User"},{"id":"Shotspotter_User","displayName":"ShotSpotter User"},{"id":"Investigate_User","displayName":"InSight User"},{"id":"$sst","displayName":"SST"}],"intercomHash":"d2a69f0fb1cca7d37fbf3cf77bd8963f33ec84603e07c8795d7a347ea82fdb67","fullName":"Allan Nienhuis","allowedActions":["agency:read","appsettingsconfig:read","dashboard.chart:view","dashboard.list:view","geoentity-type:read","geoentity:read","geogfeature:read","group:read","identityprovider:read","incident.auditlog:read","incident.cadid:read","incident.comment:read","incident.error-ellipse:read","incident.internal-comment:read","incident.tags:read","layer:read","lft:read","message-template:read","message:read","napi-device:read","napi-mqtt:read","napi-subscription:read","parcel:read","permission:read","rank:read","retrofit-health:read","role:read","rule-evaluation:read","rule-type:read","rule:read","saved-rule:read","sensor:read","subscription:read","user:read","zone:read","incident.audio:read","engineering-settings:update"],"permissions":[{"action":"read","effect":"allow","resource":"agency","roles":["$sst"],"users":[]},{"action":"read","effect":"allow","resource":"appsettingsconfig","roles":["$sst"],"users":[]},{"action":"view","effect":"allow","resource":"dashboard.chart","roles":["$sst"],"users":[]},{"action":"view","effect":"allow","resource":"dashboard.list","roles":["$sst"],"users":[]},{"action":"read","effect":"allow","resource":"geoentity-type","roles":["$sst"],"users":[]},{"action":"read","effect":"allow","resource":"geoentity","roles":["$sst"],"users":[]},{"action":"read","effect":"allow","resource":"geogfeature","roles":["$sst"],"users":[]},{"action":"read","effect":"allow","resource":"group","roles":["$sst"],"users":[]},{"action":"read","effect":"allow","resource":"identityprovider","roles":["$sst"],"users":[]},{"action":"read","effect":"allow","resource":"incident.auditlog","roles":["$sst","Investigate_User"],"users":[]},{"action":"read","effect":"allow","resource":"incident.cadid","roles":["$sst","Investigate_User","Shotspotter_User"],"users":[]},{"action":"read","effect":"allow","resource":"incident.comment","roles":["$sst","Investigate_User","Shotspotter_User"],"users":[]},{"action":"read","effect":"allow","resource":"incident.error-ellipse","roles":["$sst"],"users":[]},{"action":"read","effect":"allow","resource":"incident.ground-truth","roles":["Shotspotter_User","Investigate_User"],"users":[]},{"action":"read","effect":"allow","resource":"incident.internal-comment","roles":["$sst"],"users":[]},{"action":"read","effect":"allow","resource":"incident.tags","roles":["$sst","Investigate_User","Shotspotter_User"],"users":[]},{"action":"read","effect":"allow","resource":"layer","roles":["$sst"],"users":[]},{"action":"read","effect":"allow","resource":"lft","roles":["$sst"],"users":[]},{"action":"read","effect":"allow","resource":"message-template","roles":["$sst"],"users":[]},{"action":"read","effect":"allow","resource":"message","roles":["$sst"],"users":[]},{"action":"read","effect":"allow","resource":"napi-device","roles":["$sst"],"users":[]},{"action":"read","effect":"allow","resource":"napi-mqtt","roles":["$sst"],"users":[]},{"action":"read","effect":"allow","resource":"napi-subscription","roles":["$sst"],"users":[]},{"action":"read","effect":"allow","resource":"parcel","roles":["$sst"],"users":[]},{"action":"read","effect":"allow","resource":"permission","roles":["$sst"],"users":[]},{"action":"read","effect":"allow","resource":"rank","roles":["User"],"users":[]},{"action":"read","effect":"allow","resource":"retrofit-health","roles":["$sst"],"users":[]},{"action":"read","effect":"allow","resource":"role","roles":["$sst"],"users":[]},{"action":"read","effect":"allow","resource":"rule-evaluation","roles":["$sst"],"users":[]},{"action":"read","effect":"allow","resource":"rule-type","roles":["$sst"],"users":[]},{"action":"read","effect":"allow","resource":"rule","roles":["$sst","Review_User","Investigate_User"],"users":[]},{"action":"read","effect":"allow","resource":"saved-rule","roles":["$sst"],"users":[]},{"action":"read","effect":"allow","resource":"sensor","roles":["$sst"],"users":["user/2be14b7d-635a-4024-8afa-b28d735422ea","user/b28cf313-abcd-4795-ac66-2ee58158d84a"]},{"action":"read","effect":"allow","resource":"subscription","roles":["$sst"],"users":[]},{"action":"read","effect":"allow","resource":"user","roles":["$sst"],"users":[]},{"action":"read","effect":"allow","resource":"zone","roles":["$sst"],"users":[]},{"action":"read","effect":"allow","resource":"incident.audio"},{"action":"write","effect":"allow","resource":"incident.ground-truth"},{"action":"read","effect":"deny","resource":"incident.ground-truth"},{"action":"write","effect":"deny","resource":"incident.ground-truth"},{"action":"update","effect":"allow","resource":"engineering-settings"}]}';
const user = JSON.parse(userJSON);

export function loadHeap() {
  try {

    if (!window.heap) {
      window.heap = window.heap || [];
      window.heap.load = function (e: any, t: any) {
        window.heap.appid = e;
        window.heap.config = t = t || {};
        const r = document.createElement('script');
        r.type = 'text/javascript';
        r.async = !0;
        r.src = 'https://cdn.heapanalytics.com/js/heap-' + e + '.js';
        const a = document.getElementsByTagName('script')[0];
        a?.parentNode?.insertBefore(r, a);
        for (
          let n = function (evt: any) {
              return function () {
                window.heap.push(
                  [evt].concat(Array.prototype.slice.call(arguments, 0))
                );
              };
            },
            p = [
              'addEventProperties',
              'addUserProperties',
              'clearEventProperties',
              'identify',
              'resetIdentity',
              'removeEventProperty',
              'setEventProperties',
              'track',
              'unsetEventProperty'
            ],
            o = 0;
          o < p.length;
          o++
        ) {
          window.heap[p[o]] = n(p[o]);
        }
      };
      // debug('loading heap');
      window.heap.load(heapKey, {
        secureCookie: true // tested with and without this - but I think this requires a heap account setting change I didn't test.
      });
    }
    setTimeout(() => {
      window.heap.identify(user.id);
      const { agencyId, agencyName } = {agencyId: 0, agencyName: 'sstmetro'};
      window.heap.addUserProperties({
        createdAt: user.createdAt,
        agencyId,
        email: user.email,
        firstName: user.firstName,
        lastName: user.lastName,
        agencyName
      });
      window.heap.addEventProperties({
        app_environment: 'int',
        app_name: 'shotspotter',
        app_platform: 'web',
        app_version: '0.0.0'
      });
      // debug('heap configured');

    }, 1000);
  } catch (ex) {
    console.error(ex);
  }
}
